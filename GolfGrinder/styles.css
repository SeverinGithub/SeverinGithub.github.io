/* PWA and Native App Styling */
html {
  height: 100%;
  overflow: hidden;
  -webkit-overflow-scrolling: touch;
}

body {
  height: 100%;
  min-height: 100vh;
  min-height: 100dvh;
  min-height: 100svh;
  overflow: hidden;
  position: fixed;
  width: 100%;
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
  overscroll-behavior: none;
  touch-action: manipulation;
}

/* Safe area handling for notched devices */
.site-header {
  padding-top: max(24px, env(safe-area-inset-top));
  margin-top: max(12vh, env(safe-area-inset-top));
}

.action-card {
  padding-bottom: max(12px, env(safe-area-inset-bottom));
}

/* Prevent zoom on input focus */
input, select, textarea {
  font-size: 16px;
  -webkit-appearance: none;
  appearance: none;
}

/* Base reset */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  min-height: 100svh;
  font-family: "Raleway", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: #f7fff7;

  /* Layered golf-course inspired background */
  background-color: #0b5d1e; /* fallback */
  background-image:
    /* soft vignette */
    radial-gradient(120% 120% at 50% 20%, rgba(0,0,0,0.15) 0%, rgba(0,0,0,0) 50%),
    /* fairway stripes */
    repeating-linear-gradient(135deg, rgba(255,255,255,0.06) 0 24px, rgba(255,255,255,0) 24px 48px),
    /* main greens gradient */
    linear-gradient(180deg, #0b5d1e 0%, #1e7a2f 40%, #2c8c3b 70%, #165f25 100%);
  background-attachment: fixed, fixed, fixed;
  background-size: cover, cover, cover;
}

/* Decorative shapes: a fairway arc and a hole with flag */
.bg-decor {
  position: fixed;
  inset: 0;
  pointer-events: none;
  /* Two layered SVG masks to hint a green and a flag */
  background:
    /* green ellipse */
    radial-gradient(80% 50% at 80% 85%, rgba(20, 120, 45, 0.65) 0%, rgba(20, 120, 45, 0.45) 40%, rgba(20, 120, 45, 0) 70%),
    /* sand bunker */
    radial-gradient(25% 15% at 70% 78%, rgba(232, 210, 165, 0.85) 0%, rgba(232, 210, 165, 0.7) 60%, rgba(232, 210, 165, 0) 70%),
    /* water hazard hint */
    radial-gradient(20% 12% at 86% 70%, rgba(80, 180, 220, 0.75) 0%, rgba(80, 180, 220, 0.6) 60%, rgba(80, 180, 220, 0) 72%),
    /* hole */
    radial-gradient(20px 20px at 82% 82%, rgba(0,0,0,0.55) 48%, rgba(0,0,0,0) 52%);
  background-repeat: no-repeat;
}

.site-header {
  position: relative;
  display: grid;
  place-items: center;
  text-align: center;
  padding: 24px;
  margin: 12vh auto 0;
  width: min(92vw, 720px);
  color: #f2fff2;

  background: linear-gradient(
    to bottom right,
    rgba(255, 255, 255, 0.08),
    rgba(255, 255, 255, 0.02)
  );
  border: 1px solid rgba(255,255,255,0.16);
  border-radius: 16px;
  backdrop-filter: blur(6px) saturate(120%);
  -webkit-backdrop-filter: blur(6px) saturate(120%);
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}

.site-header h1 {
  font-weight: 800;
  letter-spacing: 0.5px;
  font-size: clamp(1.8rem, 4.5vw, 3rem);
  margin: 0 0 6px 0;
}

.site-header p {
  margin: 0;
  font-weight: 600;
  color: #e7ffe7;
  opacity: 0.9;
}

/* Scorecard */
.scorecard[hidden] { display: none; }
.scorecard { width: min(1200px, 96vw); margin: 24px auto var(--action-card-offset, 140px); }
.scorecard-head { display: flex; gap: 12px; align-items: baseline; justify-content: space-between; margin-bottom: 8px; }
.scorecard-mode { opacity: 0.9; font-weight: 700; }

.scorecard-table {
  overflow: auto;
  background: linear-gradient(
    to bottom right,
    rgba(255,255,255,0.28),
    rgba(255,255,255,0.16)
  );
  border: 1px solid rgba(255,255,255,0.28);
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
  backdrop-filter: blur(10px) saturate(150%);
  -webkit-backdrop-filter: blur(10px) saturate(150%);
}

.table-grid {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(70px, 1fr);
}
.table-grid .col { display: grid; grid-template-rows: auto repeat(var(--holes), 1fr) auto; }

.table-cell {
  padding: 10px;
  border-bottom: 1px solid rgba(255,255,255,0.16);
  border-right: 1px solid rgba(255,255,255,0.16);
}

.table-cell.header { position: sticky; top: 0; background: rgba(0,0,0,0.38); backdrop-filter: blur(6px); font-weight: 800; z-index: 1; }
.table-cell.footer { background: rgba(0,0,0,0.30); font-weight: 800; }

.score-input,
.par-input {
  width: 100%;
  text-align: center;
  background: rgba(0,0,0,0.22);
  border: 1px solid rgba(255,255,255,0.28);
  color: inherit;
  padding: 10px 6px;
  border-radius: 8px;
  font: inherit;
}
.score-input:focus,
.par-input:focus { outline: 2px solid rgba(255,255,255,0.4); outline-offset: 2px; }
.score-sum { text-align: center; display: grid; place-items: center; }

@media (max-width: 720px) {
  .table-grid { grid-auto-columns: minmax(64px, 1fr); }
}

/* Modal overlay */
.modal-overlay[hidden] { display: none; }
.modal-overlay {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: color-mix(in oklab, black 50%, transparent);
  padding: 24px;
  z-index: 50;
}

.modal-card {
  width: min(720px, 96vw);
  background: linear-gradient(
    to bottom right,
    rgba(255,255,255,0.18),
    rgba(255,255,255,0.08)
  );
  border: 1px solid rgba(255,255,255,0.22);
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.5);
  backdrop-filter: blur(8px) saturate(130%);
  -webkit-backdrop-filter: blur(8px) saturate(130%);
  color: #f7fff7;
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 18px 18px 8px;
}

.mode-chip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  background: rgba(0,0,0,0.25);
  border: 1px solid rgba(255,255,255,0.18);
  font-weight: 700;
  font-size: 0.9rem;
}

.modal-body { padding: 0 18px 18px; }

.players-list { display: grid; gap: 10px; margin-top: 8px; }
.player-row { display: grid; grid-template-columns: 1fr auto; gap: 8px; align-items: center; }
.player-input {
  width: 100%;
  background: rgba(255,255,255,0.12);
  border: 1px solid rgba(255,255,255,0.25);
  color: inherit;
  padding: 12px 12px;
  border-radius: 10px;
  font: inherit;
}
.player-input::placeholder { color: rgba(255,255,255,0.8); }

.rounds-selector {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 16px 0 8px;
  padding: 12px;
  background: rgba(255,255,255,0.08);
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.15);
}

.rounds-selector[hidden] {
  display: none !important;
}

.rounds-selector label {
  font-weight: 600;
  white-space: nowrap;
}

.rounds-selector select {
  background: rgba(255,255,255,0.12);
  border: 1px solid rgba(255,255,255,0.25);
  color: inherit;
  padding: 8px 12px;
  border-radius: 8px;
  font: inherit;
  cursor: pointer;
}

.rounds-selector select:focus {
  outline: 2px solid rgba(255,255,255,0.4);
  outline-offset: 2px;
}

.remove-player,
.add-player,
.cancel-modal,
.confirm-modal {
  appearance: none;
  border: 1px solid rgba(255,255,255,0.25);
  background: rgba(255,255,255,0.1);
  color: #f7fff7;
  font: inherit;
  padding: 10px 12px;
  border-radius: 10px;
  cursor: pointer;
}

.remove-player { width: 42px; aspect-ratio: 1; font-weight: 800; }

.modal-actions { display: flex; gap: 10px; align-items: center; margin-top: 14px; }
.modal-actions .spacer { flex: 1; }
.add-player { font-weight: 700; }
.confirm-modal { background: rgba(40, 180, 90, 0.5); border-color: rgba(40, 180, 90, 0.7); font-weight: 800; }
.cancel-modal { background: rgba(0,0,0,0.2); }

/* Fixed bottom action card */
.action-card {
  position: fixed;
  left: 0;
  right: 0;
  bottom: env(safe-area-inset-bottom);
  padding: 12px 16px calc(12px + env(safe-area-inset-bottom));
  display: grid;
  place-items: center;
  z-index: 20;
}

.game-picker {
  position: relative;
  width: min(680px, 94vw);
  margin: 0 auto;
  background: linear-gradient(
    to bottom right,
    rgba(255,255,255,0.18),
    rgba(255,255,255,0.08)
  );
  border: 1px solid rgba(255,255,255,0.22);
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  backdrop-filter: blur(8px) saturate(130%);
  -webkit-backdrop-filter: blur(8px) saturate(130%);
}

.picker-trigger {
  list-style: none;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  width: 100%;
  padding: 14px 16px;
  cursor: pointer;
  user-select: none;
}

.picker-trigger::-webkit-details-marker { display: none; }

.trigger-text { display: grid; }
.trigger-text strong { font-weight: 800; line-height: 1.2; }
.trigger-text .current-mode { font-size: 0.95rem; opacity: 0.9; }

.chevron { transition: transform 160ms ease; opacity: 0.9; }
.game-picker[open] .chevron { transform: rotate(180deg); }

.picker-list {
  position: absolute;
  left: 8px;
  right: 8px;
  bottom: calc(100% + 10px);
  margin: 0;
  padding: 8px;
  list-style: none;
  background: rgba(18, 55, 28, 0.9);
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 12px;
  box-shadow: 0 14px 36px rgba(0,0,0,0.45);
  backdrop-filter: blur(8px) saturate(140%);
  -webkit-backdrop-filter: blur(8px) saturate(140%);
}

.mode-option {
  appearance: none;
  width: 100%;
  text-align: left;
  background: transparent;
  border: 0;
  color: #f7fff7;
  font: inherit;
  padding: 12px 10px;
  border-radius: 8px;
  cursor: pointer;
}

.mode-option:hover,
.mode-option:focus-visible {
  outline: none;
  background: rgba(255,255,255,0.12);
}

@media (prefers-color-scheme: light) {
  body { color: #0a2813; }
  .site-header { color: #0a2813; border-color: rgba(0,0,0,0.08); }
  .site-header p { color: #0a2813; opacity: 0.8; }
  .modal-card { color: #0a2813; }
  .player-input { background: rgba(0,0,0,0.05); border-color: rgba(0,0,0,0.15); }
  .remove-player, .add-player, .cancel-modal, .confirm-modal { color: #0a2813; background: rgba(0,0,0,0.06); border-color: rgba(0,0,0,0.12); }
  .confirm-modal { background: rgba(40, 180, 90, 0.2); border-color: rgba(40, 180, 90, 0.4); }
  .picker-list { background: rgba(255,255,255,0.9); }
  .mode-option { color: #0a2813; }
  .table-cell.header { background: rgba(255,255,255,0.9); }
  .table-cell.footer { background: rgba(0,0,0,0.06); }
  .score-input, .par-input { background: rgba(0,0,0,0.06); border-color: rgba(0,0,0,0.12); }
  .rounds-selector { background: rgba(0,0,0,0.04); border-color: rgba(0,0,0,0.08); }
  .rounds-selector select { background: rgba(0,0,0,0.05); border-color: rgba(0,0,0,0.15); }
} 